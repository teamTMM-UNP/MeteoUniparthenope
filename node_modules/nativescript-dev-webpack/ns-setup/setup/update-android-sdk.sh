#!/bin/bash

var=$(android -h)

print_and_execute() {
    echo "sdkmanager $1" # print
    yes | $ANDROID_HOME/tools/bin/sdkmanager "$1" # execute
}

if [[ $var == *"Usage:"* ]]; then
    echo "SDK Tools: Old!"
    echo y | $ANDROID_HOME/tools/android update sdk --filter platform-tools --all --no-ui
    echo y | $ANDROID_HOME/tools/android update sdk --filter tools --all --no-ui
    echo y | $ANDROID_HOME/tools/android update sdk --filter build-tools-25.0.3 --all --no-ui
    echo y | $ANDROID_HOME/tools/android update sdk --filter build-tools-25.0.2 --all --no-ui
    echo y | $ANDROID_HOME/tools/android update sdk --filter build-tools-23.0.1 --all --no-ui
    echo y | $ANDROID_HOME/tools/android update sdk --filter android-27 --all --no-ui
    echo y | $ANDROID_HOME/tools/android update sdk --filter android-25 --all --no-ui
    echo y | $ANDROID_HOME/tools/android update sdk --filter android-24 --all --no-ui
    echo y | $ANDROID_HOME/tools/android update sdk --filter android-23 --all --no-ui
    echo y | $ANDROID_HOME/tools/android update sdk --filter android-22 --all --no-ui
    echo y | $ANDROID_HOME/tools/android update sdk --filter android-21 --all --no-ui
    echo y | $ANDROID_HOME/tools/android update sdk --filter android-19 --all --no-ui
    echo y | $ANDROID_HOME/tools/android update sdk --filter android-18 --all --no-ui
    echo y | $ANDROID_HOME/tools/android update sdk --filter android-17 --all --no-ui
    echo y | $ANDROID_HOME/tools/android update sdk --filter extra-android-m2repository --all --no-ui
    echo y | $ANDROID_HOME/tools/android update sdk --filter extra-google-m2repository --all --no-ui
else
    echo "SDK Tools: New!"
    print_and_execute "platform-tools"
    print_and_execute "tools"
    print_and_execute "build-tools;28.0.0-rc1"
    print_and_execute "build-tools;27.0.3"
    print_and_execute "build-tools;27.0.2"
    print_and_execute "build-tools;26.0.3"
    print_and_execute "build-tools;26.0.0"
    print_and_execute "build-tools;25.0.3"
    print_and_execute "build-tools;25.0.2"
    print_and_execute "build-tools;23.0.1"
    print_and_execute "platforms;android-P"
    print_and_execute "platforms;android-27"
    print_and_execute "platforms;android-26"
    print_and_execute "platforms;android-25"
    print_and_execute "platforms;android-24"
    print_and_execute "platforms;android-23"
    print_and_execute "platforms;android-22"
    print_and_execute "platforms;android-21"
    print_and_execute "platforms;android-19"
    print_and_execute "platforms;android-18"
    print_and_execute "platforms;android-17"
    print_and_execute "emulator"
    print_and_execute "extras;android;m2repository"
    print_and_execute "extras;google;m2repository"
    # This is for DEBUG purposes.
    # print_and_execute --list
fi
