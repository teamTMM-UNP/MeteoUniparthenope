#!/bin/bash

var=$(android -h)

print_and_execute() {
    echo "sdkmanager $1" # print
    yes | $ANDROID_HOME/tools/bin/sdkmanager "$1" # execute
}

if [[ $var == *"Usage:"* ]]; then
    echo "SDK Tools: Old!"
    echo "We do not longer supprot this! Please update the machine!"
    exit 1
else
    echo "SDK Tools: New!"
    print_and_execute "extras;intel;Hardware_Accelerated_Execution_Manager"
    sudo $ANDROID_HOME/extras/intel/Hardware_Accelerated_Execution_Manager/silent_install.sh
    print_and_execute "system-images;android-P;google_apis;x86"
    print_and_execute "system-images;android-27;google_apis;x86"
    print_and_execute "system-images;android-26;google_apis;x86"
    print_and_execute "system-images;android-25;google_apis;x86"
    print_and_execute "system-images;android-24;default;x86"
    print_and_execute "system-images;android-23;default;x86"
    print_and_execute "system-images;android-22;default;x86"
    print_and_execute "system-images;android-22;google_apis;x86"
    print_and_execute "system-images;android-21;default;x86"
    print_and_execute "system-images;android-21;google_apis;x86"
    print_and_execute "system-images;android-19;default;x86"
    print_and_execute "system-images;android-19;google_apis;x86"
    print_and_execute "system-images;android-18;default;x86"
    print_and_execute "system-images;android-17;default;x86"
    # This is for DEBUG purposes.
    # print_and_execute --list
fi
