# Verify there is are node modules at user home
if [ -d ~/node_modules ]; then 
    ls -la ~/
    ls -la ~/node_modules
    echo "node_modules at ~ found! Please remvoe it!"
    exit 1
fi

# Verify there is are node modules in workspace
if [ -d ~/workspace/node_modules ]; then 
    ls -la ~/workspace
    ls -la ~/workspace/node_modules
    echo "node_modules at ~/workspace found! Please remvoe it!"
    exit 1
fi

# Verify network shares
set -e
echo 'PATH='$PATH
rm -rf tns-template-hello-world.tgz
set +e
cp /tns-dist/template-hello-world/Stable/tns-template-hello-world.tgz .
if [ $? -eq 0 ]; then
     echo "Network sahres are ok"
else
	echo "Failed to copy from network share."
	exit 1
fi

# Verify required software is available
set -e
java -version
node -v
npm -v
mvn -v
appium -v
tns --version
ns --help

# Verify ANDROID_HOME is not empty
verify_android_home() {
	android=$(echo $ANDROID_HOME)
	if [ $android != "" ]; then
		echo "ANDROID_HOME=$android"
	else
		echo "ANDROID_HOME is empty!"
		exit 1
	fi
}

verify_android_home
