#!/bin/bash
set -e

branch=$1

cli=nativescript.tgz
ios=tns-ios.tgz
android=tns-android.tgz

modules=tns-core-modules.tgz
widgets=tns-core-modules-widgets.tgz
angular=nativescript-angular.tgz
theme=nativescript-theme-core.tgz

array=( $cli $android $ios $modules $widgets $angular)

echo "Copying latest packages ..."
cp /tns-dist/CLI/$branch/$cli .
cp /tns-dist/tns-android/$branch/$android .
cp /tns-dist/tns-ios/$branch/$ios .
cp /tns-dist/tns-modules/$branch/$modules .
cp /tns-dist/android-widgets/$branch/$widgets .
cp /tns-dist/nativescript-angular/$branch/$angular .
# TODO: Default 'Stable'. No 'release' branch.
# cp /tns-dist/nativescript-theme-core/Stable/$theme .

# TODO: Remove '|| true'.
cp /tns-dist/tns-modules/$branch/tns-samples-*.tgz . || true

for i in "${array[@]}"
do
	if [ -f $i ]; then
		echo "$i successfully copied"
	else
		echo "$i failed to copy"
		exit 1
	fi
done
