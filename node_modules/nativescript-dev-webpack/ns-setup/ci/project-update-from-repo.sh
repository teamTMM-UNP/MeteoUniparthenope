#!/bin/bash
set -e

echo "Please use 'download-repo.sh' instead. Thanks!"

app=$1
sample=$2

echo "Clean up app (except App_Resources)"
cd $app/app
find . ! -name 'App_Resources' -type d -maxdepth 1 -exec rm -rf {} +  || true
rm -rf *.* || true
cd ../..

echo "Clean up $app/hooks folder"
rm -fr $app/hooks || true

echo "Clean up $app/node_modules folder"
rm -fr $app/node_modules || true

echo "Clean up $app/platforms folder"
rm -fr $app/platforms || true

echo "Copying $sample sample ..."
rm -rf $sample
git clone git@github.com:NativeScript/$sample.git
rm -fr $sample/app/App_Resources
mv $sample/app/* $app/app/

echo "Copying $sample/package.json ..."
if [ -f $sample/package.json ]; then
    cp $sample/package.json $app/package.json
    echo "$sample/package.json successfully copied"
fi

echo "Copying $sample/tsconfig.json ..."
if [ -f $sample/tsconfig.json ]; then
    cp $sample/tsconfig.json $app/tsconfig.json
    echo "$sample/tsconfig.json successfully copied"
fi
