#!/bin/bash
set -e

export_storage() {
    if [[ "$PWD" == *release* ]]; then
        echo "Export Release Storage:" $(date)
        export STORAGE=/mnt/Distributions/DailyBuilds/NativeScript/functional-tests/Release
    else
        echo "Export Master Storage:" $(date)
        export STORAGE=/mnt/Distributions/DailyBuilds/NativeScript/functional-tests/Stable
    fi
    echo $STORAGE
}

execute_config() {
    # echo "Print Storage:" $(date)
    # echo $STORAGE

    # echo "Print working directory:" $(date)
    # echo $PWD

    if [ "$PWD" != *functional-tests ]; then
        cd functional-tests
        echo $PWD
    fi

    echo "Execute test configuration:" $(date)
    mvn clean test -P $1
}

export_storage
execute_config $1
